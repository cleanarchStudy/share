# 13장. 컴포넌트 응집도



## 서론

어떤 클래스를 어떤 컴포넌트에 배치하는가에 대한 이야기



## REP: 재사용/릴리스 등가 원칙(Reuse/Release Equivalance Principle)



재사용 단위와 릴리즈 단위는 같다. 

-> 재사용 단위는 릴리즈시점에 모두 통합된 패키지단위를 사용해야지, 일부만 발췌해서 사용하지 말아야한다는것

-> 쉽지만 어기면 이치에 맞지 않음



이해가 안가서 아래 게시글을 보면, 재사용할때 복붙해서 사용하게될 경우 추후 라이브러리가 새로 릴리즈 되었을때, 그 릴리즈를 반영할 수 없게 됨.

참고: https://stackoverflow.com/questions/63142/the-reuse-release-equivalence-principle-rep



## CCP: 공통폐쇄원칙(Common Closure Principle)

변경의 이유가 여러개여서는 안되고, 동일한 시점에 동일한 이유로 변경되는 것들을 한데 묶어라. 



Monolithic구조에서의 CCP는..? 

동일한 시점이라는 말이 거슬려서 동일한 시점이 아닌데 동일한 이유인 경우를 산정하면,

국가별로 법적인 차이나 시차등을 이유로 특정 컴포넌트의 변경이 다른시점에 필요한 경우도 존재함. 

```

일반적으로는 동일한 이유로 변경되는 경우에는 동일한 시점에 변경이 발생하는 것이 일반적입니다. 그러나 동일한 이유로 변경되지만 동일한 시점에 발생하지 않는 예시도 존재할 수 있습니다.

예를 들어, 여러 지역 또는 국가에서 사용되는 소프트웨어 시스템을 가정해 봅시다. 각 지역 또는 국가에서는 해당 시스템을 지역 특정 요구사항에 맞게 수정해야 할 수 있습니다. 이러한 변경은 동일한 이유(지역별 요구사항)에 의해 발생하지만, 각 지역의 변경은 다른 시점에 이루어질 수 있습니다. 이 경우, 동일한 이유로 변경되는 컴포넌트를 각 지역 또는 국가에 맞게 분리하여 관리할 수 있습니다. 각각의 분리된 컴포넌트는 동일한 이유로 변경되지만, 다른 시점에 해당 지역 또는 국가에 적용됩니다.

또 다른 예로는 소프트웨어 시스템에서 보안 강화를 위한 변경을 고려해 볼 수 있습니다. 보안 취약점이 발견되거나 보안 요구사항이 변경될 때, 이를 해결하기 위한 변경이 필요합니다. 이러한 변경은 동일한 이유(보안 강화)에 의해 발생하지만, 보안 강화를 위한 패치 또는 업데이트가 다른 시점에 배포될 수 있습니다. 이 경우, 동일한 이유로 변경되는 컴포넌트를 보안 관련 기능으로 그룹화하여 변경 사항을 처리할 수 있습니다.

이러한 예시에서는 동일한 이유로 변경되지만, 변경 사항이 동일한 시점에 발생하지 않을 수 있습니다. 이 경우에도 해당 컴포넌트들을 그룹화하여 변경 사항을 관리할 수 있습니다.
```



발생할 가능성이 있거나 과거에 발생했던 대다수의 공통적인 변경에 대해서 클래스가 닫혀 있도록 설계한다. 





## CRP: 공통재사용원칙(Common Reuse Principle)

필요하지 않는것에 의존하게 강요하지 말라



ISP원칙의 포괄적인 버전



Container와 Iterator는 Java의 Collection과 Iterator를 생각하면 됨.



?? 그런데 컴포넌트 단위면 



## 컴포넌트 응집도에 대한 균형 다이어그램





https://nordicapis.com/the-bezos-api-mandate-amazons-manifesto-for-externalization/





## 알게된점

이해가 쉽게 안되는 이유중에 하나가

컴포넌트가 동일배포단위로만 생각하니, 일종의 멀티모듈시스템의 모듈, MSA의 Micro-Service 정도를 컴포넌트로 생각했는데, 생각해보니 rt.jar도 컴포넌트였음. 



## 의문점

CRP는 애초에 rt.jar와 기타 라이브러리에 불가피하게 의존하게 되는 경우가 거의 대다수인데, 라이브러리차원보다는 Multi Module, Micro-Service 레벨에서 외부에 공개된 인터페이스를 기준으로 생각하는것이 맞지 않나 생각됨. 





